<!DOCTYPE HTML>
<!--
	Astral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>DaMarcus</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/newstyles.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<script>
			// Function to load and insert HTML content
			function insertHTML() {
				fetch('worktest.html')
					.then(response => response.text())
					.then(html => {
						document.getElementById().innerHTML = html;
					})
					.catch(error => console.error('Error fetching HTML:', error));
			}
	
			
		</script>

		<!-- Wrapper-->
			<div id="wrapper">

				<!-- Nav -->
				<nav id="nav">
					<a href="#" class="icon solid fa-home" style="color:cornflowerblue"><span>Home</span></a>
					<a href="#work" class="icon solid fa-code" style="color: cornflowerblue"><span>Work</span></a>
					<a href="https://www.linkedin.com/in/damarcus-patterson-2532401a2/" target="_blank" class="icon brands fa-linkedin" style="color: cornflowerblue"><span>Linkedin</span></a>
				</nav>

				<!-- Main -->
					<div id="main">

						<!-- Me -->
							<article id="home" class="panel intro">
								<header>
									<h1 style="color:#000000; text-align: center; font-size: 30pt;"><span style="font-size: 14px; font-style: italic;">hello...I'm </span>DaMarcus</h1>
									<p style = "text-align: center;">Analyst @ Mastercard <br> MS Student @ Georgia Tech</p>
								</header>
								<a href="#work" class="jumplink pic">
									<span class="arrow icon solid fa-chevron-right"><span>See my work</span></span>
									
								</a>
							</article>

						<!-- Work -->
							<article id="work" class="panel">
								<header>
									<h2>Work</h2>
								</header>
								<p>
									Here are some projects I've worked on along with notes on things I've learned along the way. Please click on any you find interesting to learn more!
								</p>
								<br>
								<section>
									<div class="row">
										<div class="col-6 col-12-small">
											<a href="index.html#party" class="image fit"><img src="images/work/typewriter_2.jpg" alt="" ></a>
											<b>Analyzing Party Platforms</b>
											<br>
											Exploring themes and sentiments in political parties' 2020 platforms
										</div>
										<div class="col-6 col-12-small">
											<a href="index.html#ac" class="image fit"><img src="images/work/metrics_outline.jpg" alt=""></a>
											<b>Air Conditioning Sensor Network</b>
										<br>
										Developing a network of sensors to measure AC consumption and environmental conditions around the house
										</div>
										
										<div class="col-6 col-12-small">
											<a href="index.html#seg" class="image fit"><img src="images/work/vote.jpg" alt=""></a>
											<b>Dimensions of Segregation</b>
										<br>
										Looking at residential patterns could identify potential voting rights violations
										</div>
										<div class="col-6 col-12-small">
											<a href="index.html#potpourri" class="image fit"><img src="images/work/house.jpg" alt=""></a>
											<b>Assorted Projects</b>
											<br>
										Assorted projects from classes and labs.
										</div>

										<div class="col-6 col-12-small">
											<a href="index.html#ship" class="image fit"><img src="images/work/after_large_hl.jpg" alt=""></a>
											<b>Automating Ship Design</b>
											<br>
										Finding optimal component configurations in ship designs to save time and reduce cost
										</div>
										
									</div>
								</section>
							</article>

							

							<!-- Party Platforms-->
							<article id="party" class="panel">
								
								<header>
									<h2>Party Platforms <a class="icon brands fa-github" href="https://github.com/damarcusp/page-projects/blob/main/parties_1.ipynb" target="_blank"></a></h2>
									
								</header>
								

								<blockquote style="border-left-color: #BF5050;">
we pledge ourselves...to do everything in our power to aid the Government in quelling by force of arms the Rebellion now raging against its authority, and in bringing to the punishment due to their crimes the Rebels and traitors arrayed against it.
<cite>Republican Party Platform, 1864</cite>
</blockquote>
								<section>
									<div class="row">
										<div class="col-12">
											<span class="image right" style="max-width: 200px;"><img src="images/party/pencils.jpg", alt=""></span>
											<p>Typically in preparation for Presidential and Congressional elections, the major parties in the US publish platforms highlighting their principles, values, and policies to address the issues of the time. 
												
												This particularly dramatic excerpt is from the Republican party platform during the US Civil War. Analyzing texts such as these can reveal what the major issues are, how issues have changed over time,
												 and how attitudes have changed or remained the same over time. This is the first in a three-part series on using different techniques in text analysis and natural language processing to do just that.</p>
											<br>
											<p>This first part introduces various text preprocessing methods like lemmatization and stop word removal. There's also exploratory analysis using models on HuggingFace Model Hub for tasks like Named Entity Recognition, Sentiment Analysis, and Emotion Detection.</p>
											<br>
											<p>Maybe we'll find that parties are polar opposites; or perhaps we'll see that they're not so different after all. Either way, let's get started!</p>
											
										</div>
									</div>
									<hr>
									<div class="row">
										<h2>Word Counts</h2>
										
										<div class="col-12">
											<p>We'll be looking at the 2020 party platforms for the Democratic and Republican parties. As a caveat, the Republican party decided not to adopt a new platform in 2020, 
												instead opting to keep policy positions from 2016.
											   
											   From the very start, the parties' brands and priorities diverge: the Democratic platform starts with honoring Indigenous Americans, and the Republican platform begins with honoring the military and law enforcement.
											</p>
											</div>
									</div>
									<div class="row emph">
											<div class="col-6">
												<p style="font-style: italic; border-right: 2px solid white;">
													The Democratic National Committee wishes to acknowledge that we gather together to state our values on lands that have been stewarded through many centuries by the ancestors and descendants of Tribal Nations who have been here since time immemorial. We honor the communities native to this continent, and recognize that our country was built on Indigenous homelands. <br>—Democratic Party Platform
												</p>
											</div>
											<div class="col-6">
												<p style="font-style: italic;">
													We dedicate this platform with admiration and gratitude * * * * * <br>To all who stand strong in the face of danger So that the American people may be protected against it <br> The men and women of our military, of our law enforcement, and the first responders of every community in our land <br> And to their families. <br>—Republic Party Platform
												</p>
											</div>
									</div>
									<div class="row">
											<div class="col-7">
												<p> We'll start analysis by looking at a simple word count. First, we'll do preprocessing by removing uninformative words like "the", "a", "an", "on", and so on. Words like these are known as <b>stop words</b>. We'll also perform a preprocessing step known as <b>lemmatization</b> where gramatically different forms of the same word are converted to a single root form. For instance, this would transform the words "changing" and "changed" into "change." </p>
												
											   <!--span class="image right">
											   <img src="ellipse.jpg" alt="" style="max-width: 200px; max-height: 200px;">
											   </span-->

											   <p>With this preprocessing done, we can look at the most frequent words in each platform. Looking at the word clouds, there are many similarities. "American", "people", and "support" are frequent in both.</p>
											   
				
											   
											   <p>Interestingly, "public," "health", and "care" appear in the Democratic platform, but not in the Rebpuclican one. A good context for this is the Democratic platform was updated in 2020, so it includes COVID; but since the Republican platform wasn't updated, there's no mention of COVID.
											   </p>
											</div>
											<div class="col-5">
												<span class="image fit">
											   <img src="images/party/wordcloud.jpg" alt="">
											   </span>
											</div>
											<div class="col-5">
												<span class="image fit">
													<img src="images/party/wordcloud_ner.jpg" alt="">
												</span>
											</div>
											<div class="col-7">
											   <p> 
												In addition to looking at words by part of speech, we can also use <b>Named Entity Recognition</b> to see which people, places, and miscellaneous entities (e.g. legislation) are frequently mentioned. This can be done in Python using a pretrained model from Hugging Face's Model Hub. Specifically, bert-base-NER was used here.</p>
												<p>Visualizing named entities, we see some interesting results. "American" and "Democrat"/ "Republican" are common entities for both. We also see many ethnicity 
												and identity categories like "Black", "Latino", "Native American", and "LGBTQ" in the Democratic platform; and "Indian" (Native American) and "Christian" in the Republican platform. There are also some differences in language used to address the same topic, such as "Obamacare" (Republican) versus "Affordable Care" (Democratic).
											   </p>
											   </div>
											   <div class="col-12">
											   <p>So we've seen word frequencies showing how often words appear, but are there words that one party uses much more frequently than the other? Let's find out!</p>
											   <p>To compare word usage between parties, we'll compute the odds ratios of each word appearing by party. This can be done easily with scikit-learn's Count Vectorizer.
											   
										
											   
											   Comparing the results, we can see two main categories:
											   <ul>
												<li>Some words (such as  "marriage", "God", "first amendment", "health care", "[COVID] 19", "racial")  appear much more frequently in one party's platform due to difference in the substance of their platforms</li>
												<li>Other words (such as "urge" and "sure") appear seemingly due to differences in linguistic style</li>
											   </ul></p>
											   <span class="image fit">
												<img src="images/party/odds.jpg" alt="">
												</span>
											  
											   </div>
										</div>
									
									<hr>
									<div class="row">
										<h2>Sentiment</h2>
										<div class="col-12">
											
											<p>Now, we've gotten a general idea of what each party is talking about, but how do we find out how each party actually feels about the topics? That's where <b>sentiment analysis</b> comes in handy!

												With sentiment analysis, we can predict how positive or negative a text is. Luckily, there are many pretrained models available on the HuggingFace Model Hub, so let's use distilbert/distilbert-base-uncased-finetuned-sst-2-english. Using this on the excerpt</p>
												<br><p style="font-style: italic; text-align: center;">"People living paycheck to paycheck are struggling, sacrificing, and suffering." </p><br>
												<p>returns a score of Negative: .986. The sentence is a total bummer, but sentiment was correctly detected!</p>
												
												<p>One thing to note is that this model has an input limit of roughly 500 words by default. Input length is checked in the accompanying Jupyter notebook, and it looks like our data is good to use for this model.</p>
												
												<p>Now, let's look at another type of sentiment analysis. Words come with a variety of emotions attached, not just positive and negative. Luckily, there are models than can perform multiclass classification on text emotions. We'll use EmoRoBERTa, which can classify 28 emotions including anger, sadness, fear, and joy. Since there are many more options, we'll want to return the full distribution from this model instead of just the top emotion. Then, we'll extract the logits from the output and use softmax function to calculate probabilities.
												</p>
										</div>
									</div>
									<div class="row emph">
										Example:
										<p style=" font-style: italic;">"Our public schools are bedrock community institutions, and yet our educators are underpaid, our classrooms are overstuffed, and our school buildings have been neglected, especially in low-income neighborhoods and communities of color."</p>
										<div class="col-7">
											
											
											<pre>
<span class="kw">from</span> transformers <span class="kw">import</span> RobertaTokenizerFast, TFRobertaForSequenceClassification
<span class="kw">from</span> scipy.special <span class="kw">import</span> softmax
tokenizer = RobertaTokenizerFast.from_pretrained("arpanghoshal/EmoRoBERTa")
sentiment = TFRobertaForSequenceClassification.from_pretrained("arpanghoshal/EmoRoBERTa")

tokens = tokenizer(['Our public schools are bedrock community institutions, and yet our educators are underpaid, our classrooms are overstuffed, and our school buildings have been neglected, especially in low-income neighborhoods and communities of color.'], return_tensors='tf', padding=True)
test_result = softmax(sentiment(**tokens).logits, axis=1)								
										</pre>
												
											
						
										</div>
										<div class="col-5">
											<span class="image fit">
												<img src="images/party/sentiment.jpg" alt="">
											</span>
										</div>
										
									</div>
									<div class="row">
										<div class="col-12">
											<p>
									
												
												Since we have an entire distribution over emotions, we can find the texts that are most likely to be expressing a certain emotion. Here are a few examples of the strongest texts, by party and score:
												
												<h4>Disapproval</h4>
												<ul style="font-style: italic;">
													<li>"We oppose ill-conceived laws that would restrict magazine capacity or ban the sale of the most popular and common modern rifle." (R, 99%)</li>
													<li>"The Trump Administration's proposal to build new nuclear weapons is unnecessary, wasteful, and indefensible."" (D, 99%) </li>
												</ul>
												<h4>Joy</h4>
												<ul style="font-style: italic;">
													<li>"We celebrate the millions of Americans who open their hearts, homes, and churches to mothers in need and women fleeing abuse." (R, 95%)</li>
													<li>"Democrats believe people with disabilities deserve to lead full, happy, and healthy lives. (D, 88%) </li>
												</ul>
												<h4>Disgust</h4>
												<ul style="font-style: italic;">
													<li>"The [Environmental Protection Agency]'s Waters of the United States (WOTUS) rule, issued jointly with the Army Corps of Engineers, is a travesty." (R, 86%)</li>
													<li>"In the wealthiest country on earth, it is a moral abomination that any child could ever go to bed hungry." (D, 94%)</li>
												</ul>
											</p>
											<br>
											<p>
												Let's look at the distribution of emotions for each party's platform
												
												</p>
												<span class="image fit">
													<img src="images/party/emofull.jpg" alt="">
												</span>
												<p>
												
												The Democratic party platform seems to use more positive sentiment, approval, and other emotions such as sadness, disappointment, and anger. The Republican party platform was classified having more sentences with neutral tone, realization, disapproval, optimism, and pride.
												
												Finally, let's display some word clouds, filtered by emotion.
												
												</p>
										</div>
										<div class="col-6">
											<span class="image fit">
												<img src="images/party/fear.jpg" alt="">
											</span>
										</div>
										<div class="col-6">
											<span class="image fit">
												<img src="images/party/pride.jpg" alt="">
											</span>
										</div>
										<div class="col-12">
											<p>When using words like "judiciary" and "country" (seemingly in reference to <a href="https://en.wikipedia.org/wiki/Judicial_activism">"judicial activism"</a>), the Republican platform uses a fearful tone. The Democratic platform uses a fearful tone when referencing climate change and recent disasters ("storm", "wildfire", "Houston") as well as the preceding administration ("four", "years").</p>
											<p>To end on a positive note, we can look at some choice words used when each platform is using a prideful tone: "people", "family", "community", and "care". To keep the positive note, please ignore "enemy" and "war".</p>
										</div>
										
									</div>
									<hr>
									<div class="row">
										<h2>Conclusion</h2>
										
										<div class="col-12">
											<p>We used some classic methods in Natural Language Processing as well as some newer techniques incorporating deep learning to do some interesting analysis on party platforms. Although this was just exploratory, we were able to surface insights that could address questions like:
												<ul>
													<li>What does each party want us to be happy, sad, angry, or fearful about?</li>
													<li>Who are the target audiences?</li>
													<li>What are topics of mutual discussion, and what topics are being avoided by a party?</li>
												</ul>
												From that, we've seen some differences in the emotions the platforms convey as well as the language used and subjects discussed.</p>
												<br>
												<p>As often happens, questions lead to more questions: we've seen emotions tied to individual words, but how does each party feel about broader subjects? Additionally, how do the topics discussed vary over time? This will be explored in the next part!</p>
										</div>
										</div>
								</section>
								
							</article>

							<!-- AC -->
							<article id="ac" class="panel">
								
								<header>
									<h2>AC Sensor Network</h2>
								</header>
								
								<section>
									<div class="row">
										<div class="col-3" style="background-image:url(images/ac/thermo.jpg);">
											
										</div>
										<div class="col-9">
											<p>Living in southern Georgia, we're known for hot, humid summers. As a consequence, it seems the air conditioning is always running, and in fact, the US Energy Information Administrtation <a href="https://www.eia.gov/todayinenergy/detail.php?id=36692">estimates</a> households in this region spend over a quarter of their average energy consumption on air conditioning alone. So I got to wondering--how often is my AC actually running, and how is it affected by the temperature, humidity, and cloudiness outside? 

												The house was built before smart thermostats, so with this in mind, I got the idea to make a small network of sensors to measure AC consumption. In total, the goals for this project were:
												<ul>
												<li>Develop small sensors to record temperature, humidity, and light intensity around the house</li>
												<li>Detect when the AC is running</li>
												<li>Use power-saving techniques for the devices</li>
												<li>Have the devices send data to a server</li>
												<li>Automate sending weather information (including temperature, humidity, and cloud cover) to the server</li>
												<li>Visualize metrics</li>
												</ul>
											</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Devices</h2>
											<h3>Hardware</h3>
											<span class="image left">
												<img src="images/ac/device.jpg" alt="" style="max-width: 300px; display: block; margin: auto;">
											</span>
											<p>The parts I used were:
												<ul>
													<li>D1 Mini (microcontroller with wifi)</li>
													<li>DHT22 (and DHT11) temperature and humidity sensors</li>
													<li>Photoresistor</li>
													<li>LED</li>
													<li>Mini breadboard</li>
													<li>AA battery pack</li>
												</ul></p>
											</div>
											<div class="col-12">

											<p>With temperature and humidity recordings done by the DHT22 sensors, the only part left was figuring out how to tell if the AC was running or not. I thought of possibly using sensors to measure sound near the AC vents, or a sensor that can measure airflow by the vent.</p>

											<p>Luckily, my thermostats come with LED indicators, so I used photoresistors to tell if the light is on or off. It looks a little strange, but it works!

											By using photoresistors in all the devices, each device can also measure if the sun is up or down, how bright a day it is, and what side of the house the sun is shining on.

											</p>
											<h3>Software</h3>
											<p>The basic loop for the software is:
												<ol>
													<li>Startup and initializing sensors</li>
													<li>Take temperature, humidity, and light intensity measurements at an interval</li>
													<li>Send measuremets to server</li>
													<li>Repeat 2-4</li>
												</ol>
												This is a good start, but there are a few tweaks that can be made to improve battery life and memory usage.
											</p>
											<h4>Power</h4>
											<p>
												A frequent consideration in IoT is battery life: wanting a small device means having a small battery, but constantly having to replace batteries scales poorly with larger networks of devices. A common solution is to take measurements intermittently, and have the device spend most of its time in sleep mode. From the <a href="https://cdn-shop.adafruit.com/product-files/2471/0A-ESP8266__Datasheet__EN_v4.3.pdf">ESP8266 datasheet</a> (the chip used in this project), the current consumption is ~10 microAmps in deep sleep, compared to 80 milliAmps average and even more when trainsmitting data!
											So, the runs in a loop: take measurements and deep sleep for one minute.
<!-- Main Loop-->
											<pre>
<span class="kw">void</span> main_loop() 
{
	<span class="kw">int</span> meas_no = rtcCount.count - <span class="num">1</span>;

	// if NUM_MEASUREMENTS measurements already being stored, send to server
	// then reregister, set start time, and clear measurements
	<span class="kw">if</span>((meas_no % NUM_MEASUREMENTS == <span class="num">0</span>) && (meas_no > <span class="num">0</span>))
	{
		send_data();
		register_with_server();
		set_start_time();
		clearRTCMeasurements();
	}

	// Otherwise, if measurements isn't full, take measurements and go to sleep
	measurement_loop();  
	ESP.deepSleep(WAIT_TIME, WAKE_RF_DISABLED);
}
											</pre>
											</p>
											<h4>Memory</h4>
											<p>
												Using deep sleep addresses the power consumption issue, but it leads to another problem: memory. Memory does not persist between deep sleep cycles, so all of the measurements we record will be lost once the device goes to sleep. We could send measurements to the server every sleep cycle, but WiFi consumes a lot of power. Alternatively, we could use external storage like a microSD card, but that would increase cost. 
												Luckily, can use RTC memory which persists after sleep cycles! From <a href="https://arduino-esp8266.readthedocs.io/en/latest/libraries.html#esp-specific-apis">the docs</a>, there are a total of 512 bytes available.
<!--Measurement Loop and RTC-->
											<pre>
/*
 * reads and stores measurements from sensors
 */
<span class="kw">void</span> measurement_loop()
{
	// get measurements from sensors
	<span class="kw">char</span>* data_string = take_measurements();

	// write the measurements to memory
	updateRTCMeasurements(data_string);

	// update measurement count
	updateRTCCount();
}

/*
 * loads the measurement count from RTC memory and stores in the variable rtcCount
 */
<span class="kw">void</span> readRTCCount() 
{
	system_rtc_mem_read(RTCMEMORYSTART, &rtcCount, <span class="kw">sizeof</span>(rtcStore));
	<span class="kw">yield</span>();
}

/*
 * loads the measurements from RTC memory; result stored in variable rtc_Measurements
 */
<span class="kw">void</span> readRTCMeasurements() 
{
	system_rtc_mem_read(RTCMEMORYSTART + <span class="num">16</span>, &rtc_Measurements, <span class="kw">sizeof</span>(rtcData));
	<span class="kw">yield</span>();
}

/*
 * increments measurement count by 1
 */
<span class="kw">void</span> updateRTCCount() 
{
	// load the rtcCount variable from memory
	readRTCCount();

	// increment by 1
	rtcCount.count ++;

	// reset count if _RESET is true (for debugging or when flushing measurements)
	if (_RESET)
	{
		rtcCount.count = <span class="num">0</span>;
	}
	
	// write 4 bytes of data at RTCMEMORYSTART
	system_rtc_mem_write(RTCMEMORYSTART, &rtcCount, <span class="num">4</span>);
	<span class="kw">yield</span>();
}

/*
 * writes new data to memory
 */
<span class="kw">void</span> updateRTCMeasurements(<span class="kw">char</span> data[]) 
{
	// flush memory if _RESET is true
	if (_RESET)
	{
		clearRTCMeasurements();
		<span class="kw">return</span>;
	}
	
	// append data to rtc_Measurements
	strcat(rtc_Measurements.data, data);

	// write the new data
	system_rtc_mem_write(RTCMEMORYSTART + <span class="num">16</span>, &rtc_Measurements, <span class="kw">sizeof</span>(rtcData));
	
	<span class="kw">yield</span>();
}
											</pre>
											</p>
											<h4>Data Format</h4>
											<p>
												The memory has to be written in 4-byte chunks, the size of an int in C++. We're recording three measurements (temperature, humidity, and brightness), so if we store three measurements separately, we can store for ~42 cycles before having to send them to the server. This means we'll have to use energy-draining Wifi every 42 mintutes (cycles), but can we do any better?</p>
												<br>
												<p>In C++, an int can represent values up to 2,147,483,647. Georgia gets hot, but it's not likely to be 2 billion degrees, so we can split up the integers to store each of the three mesurements in one int! Reasonable ranges are:
												<ul>
													<li>temperature: 0-127 degrees F (7 bits)</li>
													<li>humidity: 0-100% (7 bits)</li>
													<li>light: 0-1023 (10 bits)</li>
												</ul>
												For each measurement, temperature is the first 7 bits, humidity the second 7, then light the next 10 bits. An empty data flag bit is added at the end (so it controls if the number is even or odd). This allows 3 times more measurements to be stored!
<!--Encode-->
												<pre>
<span class="kw">void</span> measure_temp()
{
	<span class="kw">int</span> t = (<span class="kw">int</span>)(dht.readTemperature() * (<span class="num">9.0</span>/<span class="num">5.0</span>)+<span class="num">32</span>); // value is 0-128, 7 bits
	temp_light_char = (t<<<span class="num">1</span>) | (temp_light_char&<span class="num">1</span>);
}
<span class="kw">void</span> measure_humidity()
{
	<span class="kw">int</span> h = (<span class="kw">int</span>)dht.readHumidity(); // value is 0-100, 7 bits
	humidity_char = (h<<<span class="num">1</span>) | (humidity_char&<span class="num">1</span>); 
	
}
<span class="kw">void</span> measure_light()
{
	<span class="kw">int</span> sensorvalue = <span class="kw">min</span>(<span class="num">1023</span>, analogRead(analogPin)); // value is 0-1024, 10 bits
	light_char = sensorvalue >><span class="num">2</span>; // XXXXXXX|XX
	temp_light_char = (temp_light_char&<span class="num">254</span>) | (sensorvalue&<span class="num">1</span>);
	humidity_char = (humidity_char&<span class="num">254</span>) | ((sensorvalue&2)>><span class="num">1</span>);
}
</pre>
</p>
											<h4>A Slight Tweak</h4>
											<p>
												When sending the request to upload data to the server, the data is sent as a string. Since our data is stored as 10 digit numbers, we will have to send 10 characters per measurement to the server. In order to decrease the size of message sent to the server (and so decrease how much WiFi is being used), 
												we can store and send the measurements with the char data type. Then, only 4 characters need to be sent per measurement. We are still using the same amount of storage space (4 bytes per combined measurement), but less than half the amount of data is being sent!
<!--Char-->												
												<pre>
/* 
 * reads measurements from sensors, then stores data as char
 */
<span class="kw">char</span>* take_measurements()
{
	<span class="kw">int</span> t = (<span class="kw">int</span>)(dht.readTemperature() * (<span class="num">9.0</span>/<span class="num">5.0</span>)+<span class="num">32</span>); // convert temperature to Fahrenheit
	<span class="kw">int</span> h = (<span class="kw">int</span>)dht.readHumidity();
	<span class="kw">int</span> l = <span class="kw">min</span>(<span class="num">1023</span>, analogRead(analogPin));

	// make sure measurements are in correct ranges
	<span class="kw">int</span> encoded[] = encode_measurements(t, h, l);

	// return ALPHABET characters at each index
	// here ALPHABET is a 64-character string
	<span class="kw">char</span> data[] = {ALPHABET[encoded[<span class="num">0</span>]], ALPHABET[encoded[<span class="num">1</span>]], ALPHABET[encoded[<span class="num">2</span>]], ALPHABET[encoded[<span class="num">3</span>]], '\0'};
	<span class="kw">return</span> data;
}												</pre>
											</p>
											<h3>Summary</h3>
											<p>
												The code starts out by registering with the server and getting the current start time. Then, the start time is stored, and the code runs in a loop collecting measurements then going into sleep mode. When it's time to send measurements again, the start time, sensor ID, sensor name, and measurements are converted to JSON and sent to the server, and the process repeats, starting with re-registering with the server and getting the start time.

												<br>
												<b>Setup</b>
												<ul>
													<li>setup the sensors; read the reset pin</li>
												<li>if doing a reset, set the measurement count to 0, delete existing measurements, and quit without waking up again</li>
												<li>load measurement count and the measurements</li>
												</ul>

												<b>Main loop</b>
												<ul>
													<li>if measurement buffer is full, send measurements and re-register with the server.</li>
													<li>take, encode, and store new measurements</li>
													<li>update measurement count</li>
												</ul>

											</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Server</h2>
											<h3>Views</h3>
												<p>Drawing on experience from an internship in Kazakhstan, I decided to use Django (a Python web framework) for the server. Here's a brief overview of the views I made for this project:</p>
													<br>
												<p><b>Views</b>
												<ul>
												<li> <b>/time</b>
												<br>
												Returns the number of seconds since midnight Eastern time, January 1, 1970. This is used by the devices to create timestamps for the measurements</li>
												<li> <b>/register/[seconds]:[name]</b>
												<br>

												Adds the device <b>[name]</b> to a database of active devices. The device is expected to send a batch of data in <b>[seconds]</b> seconds. If it has been more than five minutes since <b>[seconds]</b> and the device hasn't re-registered, it is removed from the list of active devices.</li>
												<li> <b>/upload</b>
													<br>
												Receives measurement data in JSON format with the parameters:
												<ul><li>id: sensor id</li>
												<li>name: sensor name</li>
												<li>start_time: measurement start time</li>
												<li>data: the combined temperature/humidity/light intensity data</li></ul>

												Once received, the data is decoded and stored in a database</li>
											</ul></p>
											<h3>User Endpoints</h3>
											<p>
												<ul>
													<li><b>/active</b>
														<br>
													Returns a list of active sensors, as well as the time they registered and the next time they are expected to send measurements. Sensors are removed from registration if five minutes have passed since the expected send time and they have not re-registered</li>
												
												<li> <b>/metrics/download</b>
													<br>
												Downloads a CSV file with the measurements</li>
												<li><b>/metrics/view</b>
													<br>
												Displays a dashboard of measurements from the past 24 hours</li></ul></p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Findings</h2>
											<br>
											<span class="image fit">
												<img src="images/ac/metrics1.png" alt="" style="max-width: 700px; display: block; margin: auto;">
											</span>
											<p>Here's a look at the dashboard in metrics/view. The lines indicate temperature for each of the sensors, and the red line is for the outside weather. The shaded areas indicate when the AC was running.
												
												Outside temperatures peak in the early afternoon around 90F, and this is when there's the most AC activity. Interestingly, the downstairs AC is not as active. This could be due to downstairs having fewer windows, lower ceilings, closed rooms, and cooler air sinking. Also, as expected, the temperature is uneven across the house. Specifically, it's hotter near the windows depending on where the sun is shining at that time of day.</p>
												<br>
												
												<p>In the donut chart, it looks like the upstairs AC is running over half the day, and the downstairs is on less than 25% of the day.
												
												The pie charts break down AC usage by time of day. 10am-4pm is the most active period for the upstairs AC, and 4pm-10pm for the downstairs.
												</p>
												<br>
												<p>This was a fun project fusing hardware, software, and web development. As a follow up, it would be interesting to do testing to see if actions such as improving air flow or adjusting the AC vents can lower AC usage. Since the usage is so uneven across the upstairs and downstairs AC units, even balancing the load may result in longer lifespan of the appliances.
												</p>
										</div>
									</div>
								</section>
								
							</article>

							<!-- Segregation -->
							<article id="seg" class="panel">
								
								<header>
									<h2>Dimensions of Segregation <a class="icon brands fa-github" href="https://github.com/damarcusp/page-projects/blob/main/dims_of_segregation.ipynb" target="_blank"></a></h2>
								</header>
						
								<section>
									<div class="row">
										<div class="col-12">
											<p>What is segregation? According to Merriam-Webster, segregation is defined as <span style="font-style: italic;">"the separation or isolation of a race, class, or ethnic group by enforced or voluntary residence in a restricted area, by barriers to social intercourse, by separate educational facilities, or by other discriminatory means."</span>
												 Even beyond categories like ethnicity and class, looking at residential patterns for other population segments could have broad impacts. For instance, Pew Research's <a href="https://www.pewresearch.org/religion/religious-landscape-study/">Religious Landscape Study</a> shows stark differences in political ideology based on the respondent's religious background, but is this trend as strong in areas where people of various religions are more likely to interact with one another? In another example, the Department of Education <a href="https://nces.ed.gov/programs/coe/indicator/coi/high-school-graduation-rates">reported</a> that the 2019-2020 high school graduation rate for English learners was 15 percentage points below the overall graduation rate, but looking at residential patterns from a perspective of segregation could shed light on how to address this difference.</p>
										</div>
									</div>
									<div class="row emph" style="color:#bdcbd9">
										<div class="col-12">
											<p>Sneak peek: we find the top 10 states ranked by segregation metrics shown below, and </p>
										</div>
										<div class="col-4" style="text-align: center;">
											<h2>5 / 6</h2>
											<p>of states facing lawsuits over potential Voting Rights Act violations after 2020 redistricting are in the top 10</p>
										</div>
										<div class="col-4" style="text-align: center;">
											<h2>80%</h2>
											<p>of top states faced lawsuits over potential Voting Rights Act violations or partisan gerrymandering</p>
										</div>
										<div class="col-4" style="text-align: center;">
											<h2>2x</h2>
											<p>more states were identified using all of the segregation measures versus Gini coefficient alone</p>
										</div>

									</div>
									<div class="row">
										<div class="col-12">
												<p>Given the potential of looking at segregation in residential patterns, how do we actually measure segregation? The US Census Bureau gives an <a href="https://www.census.gov/topics/housing/housing-patterns/guidance/appendix-b.html">overview</a> of five dimensions of residential segregation based on a 1988 paper by Douglas Massey and Nancy Denton: Evenness, Exposure, Concentration, Centralization, and Clustering. The rest of this project explores each of these dimensions and also gives a surprising result: using these segregation measures identifies five of the six states facing lawsuits over potential violations of Section 2 of the Voting Rights Act after 2020 redistricting.
												</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Dimensions of Segregation</h2>
												<br>
												The setup is that there's a <b>large geography unit</b> such as a state, and it's split into <b>smaller geography units</b>, such as counties, congressional districts, or Census tracts. We then look at the residential distribution of a minority group and majority group (or Group A and Group B in Massey and Denton's terminology). Following the Census Bureau's formulation, calculations are done here as if the two populations in question are the only populations of the area. A more thorough explanation of each dimension and index is given in the accompanying Jupyter notebook, but here's a summary of the five dimensions.
												
												<h3>Evenness</h3>
												Evenness is a fairly simple measure--if the ratio of minority members to majority members is the same across all sub geographies, 
												the area will have perfect evenness. The population proportions themselves don't have to be even (ie 50% to 50%). They just have to have the same ratio for every sub unit. Massey and Denton give the <b>Gini coefficient</b> as a way to measure this. Gini coefficient is also a popular measure for inequality in general. 
												
												<figure class="image fit">
													<img src="images/seg/gini.jpg" alt="" style="max-width: 500px; display: block; margin: auto;">
													<figcaption>In scenario 1, all areas have the same proportion of members, so Gini coefficient is 0.
														Scenario 2 is a "mixed" scenario while scenario 3 is maximum unevenness: some areas contain 0% minority population while others contain 100%</figcaption>
												</figure>
												
												<h3>Exposure</h3>
												Exposure measures how likely minority group members are to interact with majority group members. Two indicies propsed are the <b>Isolation Index</b> and <b>Interaction Index</b>. 
												In effect, they show the probability that a minority group member encounters another minority group member or a majority group member respectively.
												<figure class="image fit">
													<img src="images/seg/isolation.jpg" alt="" style="max-width: 400px; display: block; margin: auto;">
													<figcaption>Two scenarios with the same population, but distributed so that the Isolation Index is the same. Particularly, a few minority group members were put in an area with 1000 majority group members to make the probability of interaction high. Note that Gini coefficient changes, so Gini oefficient and Isolation Index capture different aspects of segregation.</figcaption>
												</figure>
												<h3>Concentration</h3>
												Unlike the previous two dimensions, Concentration incorporates the physical size of the area as well as population. <b>Relative Concentration</b> shows how many minority group members live in the smallest areas, compared against members of the majority group. It's measured on a scale from -1 to 1, where 1 indicates minority group members are more concentrated, and -1 indicates majority goup members are more concentrated.
												
												<figure class="image fit">
													<img src="images/seg/concentration.jpg" alt="" style="max-width: 400px; display: block; margin: auto;">
													<figcaption>In scenario 1, the minority group members live in the smallest area in the center, resulting in large Relative Concentration. All divisions in scenario 2 have the same area, so Relative Concentration is close to 0.</figcaption>
												</figure>
												
												<h3>Centralization</h3>
												The next dimension is Centralization. The <b>Centralization Index</b> measures the tendency of minority members to reside in the center of a city (or other geography being studied). As the basic idea is drawn from demographic trends in the 20th century (population shifts, <a href="https://en.wikipedia.org/wiki/Suburbanization">suburbanization</a>, <a href="https://en.wikipedia.org/wiki/Urban_decay">urban decay</a>), the concept may be considered outdated. The Census Bureau addresses this by using the population centroid instead of geographical centroid.
												<figure class="image fit">
													<img src="images/seg/centralization.jpg" alt="" style="max-width: 400px; display: block; margin: auto;">
													<figcaption>In scenario 1, all minority group members live in the central area, resulting in Centralization 1. Scenario 2 shows a more evenly distributed population</figcaption>
												</figure>
												<h3>Clustering</h3>
												The fifth and final dimension is Clustering. In general, it's the tendency for areas where minority members reside to be near each other. Two indexes proposed are the <b>Distance Decay Interaction Index</b> and <b>Distance Decay Isolation Index</b>. 
												Much like the Interaction Index and Isolation Index from earlier, they essentially represent the probability that a minority group member 
												will encounter another minority group member or a majority group member. 
												The key difference is that the Clustering indexes also account for potential interactions between people who live in different areas.
											
												<figure class="image fit">
													<img src="images/seg/ddisolation.jpg" alt="" style="max-width: 400px; display: block; margin: auto;">
													<figcaption>Both scenarios have an all-majority member district, an all-minority member district, and the remaining districts have the same ratio of minority group members to majority group members. In scenario 2, the all-majority district is placed next to the all-minority district, making it more likely that people in these two districts will interact with each other. This results in a lower Distance Decay Isolation Index for scenario 2. For comparison, Gini coefficient doesn't change.</figcaption>
												</figure>
											</div>
										</div>
										<hr>
										<div class="row">
											<div class="col-12">
												<h2>Segregation in Redistricting</h2>
												<br>
												<p>
												For a bit of background, every 10 years, the United States conducts a census, and the resulting population count is used to allocate each state a number of representatives in Congress. States are given few limits when dividing themselves into districts: districts don't have to be made by independent authorities and also don't have to obey existing boundaries like counties or the Census Bureau's statistical boundaries. Although the districts do have to be approximately equal in population, there are few concrete numerical rules when redistrcting. As a result, districts in <a href="https://www.brennancenter.org/our-work/research-reports/who-controlled-redistricting-every-state">most states</a> are passed entirely (or neary entirely) by a single party, and redistricting frequently results in lawsuits.</p>
											</div>
										</div>
										<div class="row emph">
											<div class="col-12">
												The US has a very long history of voting rights legislation and litigation, but here's a quick timeline of a few key dates
												<ul>
													<li>1868: <span style="color:#bdcbd9">14th amendment ratified, giving all citizens equal protection regardless of state</span></li>
													<li>1870: <span style="color:#bdcbd9">15th amendment ratified, giving all men the right to vote. (Women gained the right to vote four amendments and 50 years later in 1920)</li>
													<li>1960: <span style="color:#bdcbd9">in <span style="font-style: italic;">Gomillion v. Lightfoot</span>, Supreme Court finds an electoral district unconstitutional </span></li>
													<li>1965: <span style="color:#bdcbd9">Voting Rights Act of 1965</span></li>
													<li>1980: <span style="color:#bdcbd9">in <span style="font-style: italic;">Mobile v. Boden</span>, Supreme Court finds discriminatory intent is necessary for a voting discrimination claim</span></li>
													<li>1982: <span style="color:#bdcbd9">Voting Rights Act Section 2 amended to accept claims on discriminatory effect, even without proving discriminatory intent</span></li>
												</ul>
											</div>
										</div>
										<div class="row">
											<div class="col-12">
												
												<figure class="image left">
													<img src="images/seg/pop_ga.jpg" alt="" style="max-width: 300px;">
													<figcaption style="font-size: 12px; text-align: center;">Census tracts in Georgia colored by percentage of nonwhite residents</figcaption>
												</figure>
												<p>So how does this tie into segregation? Well, one common accusation is that a state's congressional districts violate <a href="https://www.justice.gov/crt/section-2-voting-rights-act">Section 2 of the Voting Rights Act</a> which <span style="font-style:italic;">"prohibits voting practices or procedures that discriminate on the basis of race, color, or membership in one of the language minority groups identified in Section 4(f)(2) of the Act."</span> </p>
												<p>Looking at this map of Georgia showing the proportion of nonwhite residents by Census tract, we can see that the distribution is not even. As a result, there's plenty of opportunity to draw district lines to gain an unfair advantage, but is there a way to quantify this potential unfair advantage?</p>
												<br>
												<p> Using the segregation dimensions above, we can compute a simple score by
												<ul>
													<li>computing segregation index for each new Congressional district by Census Tract</li>
												    <li>aggregating the indexes by state and computing standardized values for each segregation dimension</li>
													<li>summing the standardized values</li>
												</ul>
												
												Of the <a href="https://www.brennancenter.org/our-work/research-reports/redistricting-litigation-roundup-0">six</a> states whose Congressional districts resulted in lawsuits over potential violations of Section 2 of the Voting Rights Act as of July 2023 (Alabama, Arkansas, Georgia, Louisiana, Ohio, and Texas), all but Texas appear in the top 10 states produced by this ranking. An additional 3 states in the top 10 faced lawsuits for partisan gerrymandering. In total, 80% of the top 10 states have faced legal action over 2020 Congressional redistricting compared to just 50% of the top 10 when ranking by Gini coefficient alone. In all, 11 of the 18 states with lawsuits over their Congressional districts appeared in the top 18 states, and this is without using any other variables or advanced machine learning techniques!
												</p>
												<span class="image fit">
													<img src="images/seg/table.jpg" alt="" style="max-width: 400px; display: block; margin: auto;">
												</span>
											
										</div>
										<div class="col-12">
											<h3>Citation</h3>
											Massey, D. S., & Denton, N. A. (1988). The Dimensions of Residential Segregation. Social Forces, 67(2), 281–315. https://doi.org/10.2307/2579183
										</div>
									</div>
								</section>
								
							</article>

							<!-- Potpourri -->
							<article id="potpourri" class="panel">
								
								<header>
									<h2>Assorted Projects</h2>
								</header>
								<p>
                                    Here are some class projects I've worked on. I haven't made separate articles for them, so I'll be adding some here in case you'll find any interesting!
								</p>
								<br>
								<section>
									<h3>Urban Growth Simulation</h3>
									<div class="row">
                                        <div class="col-8">
                                            
                                            <p>This was a final project in Georgia Tech's Modeling & Simulation class. In it, we simulate urban growth in Atlanta using <a href="https://en.wikipedia.org/wiki/Cellular_automaton" >cellular automata</a>. A popular example of a cellular automaton is <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game of Life</a> where there is a grid of cells, and each cell can be considered "alive" or "dead". Then, cells transition between alive and dead states according to certain rules.
                                                </p></div>
                                    <div class="col-4">
                                        <figure class="image fit" style="max-width: 200px;">
                                            <img src="images/potpourri/atl.jpg" alt="" />
                                            <figcaption style="font-size: 12px;">View of Atlanta Metro Area. Brighter areas indicate higher population density.</figcaption>
                                        </figure>
                                    </div>
                                        <div class="col-12 emph">
                                            <h4 style="color: white;">Game of Life Rules</h4>
                                            <ol>
                                                <li>Any live cell with fewer than two live neighbors dies, as if by underpopulation.</li>
                                                <li>Any live cell with two or three live neighbors lives on to the next generation.</li>
                                                <li>Any live cell with more than three live neighbors dies, as if by overpopulation.</li>
                                                <li>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction.</li>
                                            </ol>
                                            <p style="text-align: right;">- Wikipedia</p>
                                        </div>
                                            <div class="col-12">
                                            <p>For our simulation, we consider a variety of factors like land usage and topographical features to identify areas where population growth is likely and how dense the population is expected to be. Such a model could heavily rely on pre-programmed rules (such as in the Game of Life), but can a neural network pick up on growth patterns just on data alone? Here's an example of a model doing just that! Here, a CNN-LSTM model is able to replicate the rules of Conway's Game of Life with fair accuracy. </p>
                                            <figure class="image fit">
                                                <img src="images/potpourri/gol.jpg" alt="" />
                                                <figcaption style="font-size: 12px;">Top row indicates actual Game of Life progression; bottom row is predicted output. Boxed areas show examples of where predicted output corresponds to the actual output in the box with the corresponding color.</figcaption>
                                            </figure>
                                        </div>
									</div>
									<hr>
									<h3>Embedding Hidden Messages in Images</h3>
									<div class="row">
                                        <div class="col-12">
                                            <figure class="image fit">
                                                <img src="images/potpourri/stego.jpg" alt="" />
                                                 </figure>
                                            <p>The images on the top and bottom rows look the same, but really, the images on the bottom row are embedded with the text of Dr. Seuss's "Green Eggs and Ham". 
                                                </p><br>
                                                <p>This was my final project for MIT's 18.065 class: Matrix Methods. It explored and compared <b>steganography</b> methods. In short, steganography is a way to hide information in plain sight. One can embed secret data--for instance, illicit content or malicious code--into another medium such as an image. The image appears unchanged and can be openly exchanged with others who can then extract the hidden message.
                                                </p><br>
                                            <p>Since the class involved matrix methods, I compared two methods: one from <a style="font-style: italic;" href="https://www.sciencedirect.com/science/article/abs/pii/S009630030601318X">On SVD-based watermarking algorithm</a>, and another adapted from a method for embedding messages in audio, <a style="font-style: italic;" href="https://link.springer.com/article/10.1007/s00034-018-0805-9">A DCT-SVD-Based Speech Steganography in Voiced Frames</a>.

                                            One benefit of the second method is that it can survive some attacks as well. For instance, JPEG encoding leaves the image looking mostly the same, but changes enough bits to cause disruption. On the test images, 80% of the message was still able to be extracted, even after JPEG encoding with quality level 10. Attacks via Gaussian blur and random pixel changes were also tested, and the second method performed well against them.
                                                </p><br>
                                           <p> Absent of attacks, the second method recovered nearly 100% of the hidden message. The first method performed well, but had issues with images containing large, plain areas of a single color. Here's an example of a corrupted message:</p>
                                                </div>
                                                <div class="col-6">
                                            <blockquote>
                                                I do not like green eggs and ham.<br>

I do not like them, Sam I am.<br>

Would you eat them in a box?<br>

Would you eat them with a fox?<br>


Not in a box.<br> 

Not with fox.<br>
<cite>"Green Eggs and Ham" original</cite>

                                            </blockquote>
                                        </div>
                                        <div class="col-6">
                                            <blockquote>
                                                I do not like green,gE))<br>
hnm ham.<br>

I do not like them, Sam I am.<br>



Would you eat them in a box?<br>

Would you ei))wAem with a fox?<br>



Not in a box.<br> 

Not witi)) fox.<br>
<cite>"Green Eggs and Ham" extracted from corrupted image</cite>

                                            </blockquote>
                                        </div>
									</div>
								</section>
                                
							</article>

							<!-- Ship -->
							<article id="ship" class="panel">
								
								<header>
									<h2>Automating Ship Design</h2>
								</header>
			
								<span>
									<img src="images/ship/ship.jpg" alt="" style=" max-height:300px; display: block; margin-left: -50px; margin-right: -50px;">
								</span>
								<section>
									<div class="row">
										<div class="col-12">
											<p>Naval ships contain a variety of components, like those for power generation, navigation, and water management. A ship designer might spend a lot of time manually configuring components in an early-stage design since they have to consider things like weight distribution and accessibility of components for maintenance. In a project with MIT Sea Grant, I worked on part of their pipeline for automated ship design. The goal of this project was to automatically find an optimal configuration of ship components with these guidelines:
											<ul>
												<li>Components can't collide with each other or intersect the ship hull</li>
												<li>Components should have a specified amount of empty space to give people enough room to maintain and clean the component. Maintanance spaces can overlap with each other, but not with a component's body or the ship hull</li>
												<li>Components connected by wires or pipes should be placed closer together (to redue wiring/piping cost)</li>
												<li>Heavier components can be placed lower</li>
												<li>Similar components can be placed farther apart (in case there's a problem in one area of a ship, backup components in another part will still function)</li>
											</ul>
											See more about our solution below!</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Setup</h2>
											<span class="image left">
												<img src="images/ship/generator.jpg" alt="" style="max-height: 250px; display: block; margin: auto;">
											</span>
											<p>As input, we used files from Smart Ship System Design, a ship design software. On the left, there's an example of a generator from an electrical view and a thermal view.
												
												Luckily, the lab already had code to export ship designs as a CSV file, so I did not need to focus on input/output.</p>
												<br>
												<p>Since this project involves interconnected components, a natural representation is a graph (or network) where ship components are the vertices and an edge exists wherever components are connected by piping or wiring. In total, the columns of the CSV included:
												<ul>
													<li>component ID</li>
													<li>x,y,z position</li>
													<li>component sizes in x, y, and z directions</li>
													<li>maintenance spaces in x, y, and z directions</li>
													<li>list of connected component IDs</li>
												</ul>
												
												Since the team had this part of the code covered, I focused mostly on the optimization part</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Optimization</h2>
											<br>
											<p>Given that we wanted to find 2D positions of vertices in a graph, a good starting candidate was <a href="https://en.wikipedia.org/wiki/Force-directed_graph_drawing">force-directed graph drawing</a>. The basic idea involves spring-like forces that model attraction between connected components and electrical-repulsion-like forces that model repulsion between components. Simulating the components' movements under these forces will eventually lead to an equilibrium state where the forces between the connected components (which are attracted to each other) are balanced with the repulsive forces. The lab already had an implementation of this, so the remaining work for me was to speed up the implementation and factor in additional critera (like overlapping maintenance spaces and redundant component placement).</p>
											<p>The biggest area of potential speedup was in vectorizing the calculations. Here's a sketch of the various distances we had to consider:
												<span class="image fit">
													<img src="images/ship/distances.jpg" alt="" style="max-width: 450px; display: block; margin: auto;">
												</span>
											</p>
											<p>In that picture, there are two components: <b>i</b> and <b>j</b>. There's also a hull boundary (or subdivision bulkhead boundary) <b>m</b>. <b>r</b> represents the distance between centroids, and <b>d</b> represents the distance between bounding boxes, including maintenance spaces. It turns out that all of the distances including bounding boxes, maintenance spaces, hull boundaries, and potential overlaps can be vectorized and computed in a single function. For calculations that involve only components that are connected to each other, getting the connected components is just element-wise multiplication by the adjacency matrix. There are also additional multiplications and tensor contractions as needed.
												
											</p>
											<br>
											<p>With the calculations for distances complete, all that's left is the optimization. We used Python / Tensorflow to run gradient descent. This allowed  us to do "plug and play" modifications to the loss functions in order to capture each of the design guidelines we wanted to satisfy, with a few additions to avoid local minima. The redundant component placement criteron went untested, but it can also be represented in a loss function term. In all, the vectorization and use of Tensorflow allowed more versatility and was 13 times faster than before!
												</p>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-12">
											<h2>Output</h2>
											<br>
											<p>In addition to unit testing to ensure the distance calculations and input/output code was correct, we ran the optimization code on several test cases. In each example, fixed components are blue, movable components are grey, colliding components are in red, and conections between components are represented by green lines.
												</p><br>

												<p>Here, there are two fixed components and two other components. The bounding box is in orange, and maintenance spaces are gray transparent boxes. All initial collisions are resolved, and maintenance spaces overlap to for a more compact design.
												
												<span class="image fit">
													<img src="images/ship/opposites.jpg" alt="" style="max-width: 300px; display: block; margin: auto;">
												</span>
												<br>
												This is a test of a simple system. In the beginning, all objects are placed in the middle. The components were completely reconfigured within the bounds (shown as a cage)
												
												<span class="image fit">
													<img src="images/ship/ship_medium.jpg" alt="" style="max-width: 300px; display: block; margin: auto;">
												</span>
												<br>
												This is an actual ship design. All collisions are resolved within the bounds
												
												<span class="image fit">
													<img src="images/ship/ship_large.jpg" alt="" style="max-width: 300px; display: block; margin: auto;">
												</span>
											</p>
										</div>
									</div>
								</section>
								
							</article>
							
					</div>

				<!-- Footer -->
					<div id="footer">
						<ul class="copyright">
							<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</div>

			</div>

		<!-- Scripts -->
			
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
				function toggleMore(oid, oldtext) {
				  var dots = document.getElementById(oid+"_dots");
				  var moreText = document.getElementById(oid+"_more");
				  var btnText = document.getElementById(oid);
				
				  if (dots.style.display === "none") {
					dots.style.display = "inline";
					btnText.innerHTML = oldtext; 
					moreText.style.display = "none";
				  } else {
					dots.style.display = "none";
					btnText.innerHTML = "Read less"; 
					moreText.style.display = "inline";
				  }
				}
				</script>

	</body>
</html>
